(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3986],{67127:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/feed",function(){return a(48361)}])},82556:function(e,t,a){"use strict";var r=a(85893),s=a(70829),i=a(45830),n=a(14323),l=a(67294);let d=e=>{let{sharedConversations:t,viewedIds:a,setViewedIds:d,mutate:o}=e,[c,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=t.filter((e,t,a)=>t===a.findIndex(t=>t.id===e.id));u(e),m(e)},[t]);let m=e=>{if(!e||0===e.length||!a||!d)return;let t=new Set([...a]);for(let a of e)a.id&&!t.has(a.id)&&(i.x.countConversationView({sharedConversationId:a.id}),t.add(a.id));t.size>a.size&&d(t)};return(0,r.jsx)("div",{className:(0,n.AK)("flex flex-col gap-8 divide-primary-700 rounded-lg"),children:c.map(e=>{if(e.messages&&0!==e.messages.length)return(0,r.jsx)(s.Z,{view:"feed",sharedConversationDetailed:e,mutate:o},e.id)})})};t.Z=d},88133:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(44593);function s(e,t,a){var s;let i="pageLimit"in a?a.pageLimit:"limit"in a?a.limit:16,{data:n,mutate:l,size:d,setSize:o,isValidating:c,isLoading:u,error:m}=(0,r.ZP)((t,r)=>{if(r&&!r.length)return null;a.offset=0===t?0:t*i,"pageLimit"in a&&(a.limit=i,delete a.pageLimit);let s=e;return Object.entries(a).reduce((t,a,r)=>{let[i,n]=a;return i&&i.length>0&&null!=n&&(s+="".concat(0===r&&"?"===e[e.length-1]?"":"&").concat(i,"=").concat(n)),t},e),s},t),h=n?[].concat(...n):[],p=u||d>0&&n&&void 0===n[d-1],f=!u&&(!n||!n[0]||0===n[0].length),x=f||n&&(null===(s=n[n.length-1])||void 0===s?void 0:s.length)<i,v=c&&n&&n.length===d;return{data:h,isLoadingMore:p,isReachingEnd:x,isRefreshing:v,isEmpty:f,error:m,mutate:l,size:d,setSize:o}}},96093:function(e,t,a){"use strict";a.d(t,{f4:function(){return s},Fi:function(){return d},nR:function(){return c},J5:function(){return o},dB:function(){return n},qX:function(){return i},bs:function(){return l}});var r=a(94804);let s=[{provider:r.gK,status:"active",displayName:"Open AI",logo:"/providers/openai-light.svg",models:[{model:r.Ef,status:"active",parameters:[]},{model:r.HI,status:"active",parameters:[]},{model:r.Wf,status:"active",parameters:[]},{model:r.vu,status:"inactive",parameters:[]}]},{provider:"COHERE",status:"soon",displayName:"Cohere",logo:"/providers/cohere.png",models:[{model:"medium",status:"active",parameters:[]},{model:"xlarge",status:"active",parameters:[]}]},{provider:"ANTHROPIC",status:"active",displayName:"Anthropic",logo:"/providers/anthropic-light.svg",models:[{model:"claude-instant-1",status:"active",parameters:[]},{model:"claude-2",status:"active",parameters:[]}]}],i=e=>{var t,a;return null!==(a=null===(t=s.find(t=>t.provider===e))||void 0===t?void 0:t.models.map(e=>e.model))&&void 0!==a?a:[]},n=e=>{var t,a;return null!==(a=null===(t=s.find(t=>t.provider===e))||void 0===t?void 0:t.models.filter(e=>"inactive"!==e.status).map(e=>({model:e.model,status:e.status})))&&void 0!==a?a:[]},l=(e,t)=>{var a,r,i;return null!==(i=null===(a=null===(r=s.find(t=>t.provider===e))||void 0===r?void 0:r.models.find(e=>e.model===t))||void 0===a?void 0:a.parameters)&&void 0!==i?i:[]},d={"gpt-3.5-turbo":"ChatGPT","gpt-4":"GPT-4","gpt-4-1106-preview":"GPT-4 Turbo","claude-instant-1":"Claude Instant","claude-2":"Claude 2"},o=e=>{var t;let a=null===(t=e.config)||void 0===t?void 0:t.data.model;return a&&d[a]?d[a]:null!=a?a:d["gpt-3.5-turbo"]};s.filter(e=>"active"===e.status).map(e=>e.provider);let c=s.filter(e=>"inactive"!==e.status).map(e=>({provider:e.provider,status:e.status}));"".concat(r.gK,":").concat(r.Ef)},48361:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(85893),s=a(95424),i=a(91173),n=a(14323),l=a(53269),d=a(35377),o=a(88133),c=a(67294),u=a(58533),m=a(60117);let h=async e=>{let t=await m.j.authorizedFetch(e),a=await t.json();if(!t.ok||!a){let e=Error("An error occurred while fetching the data.");throw e}return a.sharedConversations};var p=a(82556);let f=e=>{let{onRefreshing:t,onInitialLoad:a,refreshTriggered:s,mobileView:i}=e,{data:n,error:l,size:m,setSize:f,mutate:x,isLoadingMore:v,isReachingEnd:g,isRefreshing:j,isEmpty:w}=(0,o.Z)("/shared-conversations?",h,{pageLimit:3});(0,c.useEffect)(()=>{null==t||t(j)},[j]),(0,c.useEffect)(()=>{null==a||a()},[n]),(0,c.useEffect)(()=>{s&&x()},[s]);let[y,N]=(0,c.useState)(new Set);return(0,r.jsxs)("div",{children:[i&&(0,r.jsx)(I,{reload:x,isRefreshing:j,hasLoadedInitialFeed:n.length>0}),m<=1&&w?(0,r.jsx)("div",{className:"w-full max-w-lg mx-auto mt-4",children:(0,r.jsx)("p",{className:"text-center text-primary-300",children:"No Snips found"})}):w||l?(0,r.jsx)("p",{className:"text-center mt-4",children:"Error loading feed"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{dataLength:n.length,next:()=>f(m+1),hasMore:!g,loader:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(p.Z,{sharedConversations:n,viewedIds:y,setViewedIds:N,mutate:x})}),!g&&(0,r.jsx)("div",{className:"flex justify-center items-center p-4 md:p-8",children:v?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(d.Z,{})}):(0,r.jsx)("button",{disabled:v||g,onClick:()=>f(m+1),className:"px-3 py-2 bg-primary-700 hover:bg-primary-650 rounded-lg text-sm transition duration-200 ease-in-out",children:"Load More"})})]})]})};var x=a(11163);let v=e=>{let{userId:t,onRefreshing:a,onInitialLoad:s,refreshTriggered:i,mobileView:n}=e,{data:l,error:m,size:f,setSize:x,mutate:v,isLoadingMore:g,isReachingEnd:j,isRefreshing:w,isEmpty:y}=(0,o.Z)("/users/".concat(t,"/shared-conversations?"),h,{pageLimit:3});return(0,c.useEffect)(()=>{null==a||a(w)},[w]),(0,c.useEffect)(()=>{null==s||s()},[l]),(0,c.useEffect)(()=>{i&&v()},[i]),(0,r.jsxs)("div",{children:[n&&(0,r.jsx)(I,{reload:v,isRefreshing:w,hasLoadedInitialFeed:l.length>0}),(0,r.jsx)("div",{children:f<=1&&y?(0,r.jsxs)("div",{className:"w-full max-w-lg mx-auto mt-4",children:[(0,r.jsx)("div",{className:"text-center  text-primary-300",children:"No shared conversations found."})," ",(0,r.jsx)("div",{className:"text-center text-primary-300 mt-2",children:"You can share snippets of your conversations by heading to any open chat and selecting the share conversation button."})]}):y||m?(0,r.jsx)("p",{className:"text-center mt-4",children:"Error loading feed"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{dataLength:l.length,next:()=>x(f+1),hasMore:!j,loader:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(p.Z,{sharedConversations:l,mutate:v})}),!j&&(0,r.jsx)("div",{className:"flex justify-center items-center p-4 md:p-8",children:g?(0,r.jsx)("div",{className:"",children:(0,r.jsx)(d.Z,{})}):(0,r.jsx)("button",{disabled:g||j,onClick:()=>x(f+1),className:"px-3 py-2 bg-primary-700 hover:bg-primary-650 rounded-lg text-sm transition duration-200 ease-in-out",children:"Load More"})})]})})]})};var g=a(67091),j=a(76405),w=a(23735);let y=j.fC;j.ZA;let N=j.B4,b=c.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(j.xz,{ref:t,className:(0,n.cn)("flex h-9 w-full items-center justify-between rounded-md","border border-primary-800 bg-transparent px-3 py-2 text-sm shadow-sm ","bg-white dark:bg-primary-900","placeholder:text-muted-foreground focus:outline-none ","disabled:cursor-not-allowed disabled:opacity-50","hover:bg-primary-900 dark:hover:bg-primary-800","transition duration-200 ease-in-out",a),...i,children:[s,(0,r.jsx)(j.JO,{asChild:!0,children:"caret "})]})});b.displayName=j.xz.displayName;let C=c.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...l}=e;return(0,r.jsx)(j.h_,{children:(0,r.jsx)(j.VY,{ref:t,className:(0,n.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md","border border-primary-700 shadow-md","bg-white dark:bg-primary-900 p-1"," data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:(0,r.jsx)(j.l_,{className:(0,n.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});C.displayName=j.VY.displayName;let k=c.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(j.__,{ref:t,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",a),...s})});k.displayName=j.__.displayName;let Z=c.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(j.ck,{ref:t,className:(0,n.cn)("relative flex w-full cursor-pointer select-none items-center rounded-md"," py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","hover:bg-primary-800",a),...i,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(j.wU,{children:(0,r.jsx)(w.NO,{size:"sm"})})}),(0,r.jsx)(j.eT,{children:s})]})});Z.displayName=j.ck.displayName;let E=c.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(j.Z0,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});E.displayName=j.Z0.displayName;var L=a(41664),R=a.n(L);let _=e=>{let{refreshTriggered:t,onRefreshing:a,onInitialLoad:s,mobileView:i}=e,n=(0,x.useRouter)(),{userId:l}=(0,g.Z)();return(0,r.jsx)("div",{className:"pb-8",children:"private"===n.query.path?(0,r.jsxs)(r.Fragment,{children:[l?(0,r.jsx)(v,{userId:l,mobileView:i,refreshTriggered:t,onRefreshing:a,onInitialLoad:s}):(0,r.jsxs)("div",{className:"mt-8",children:["Please make sure you","'","re logged in to view your own snips."]})," "]}):(0,r.jsx)(f,{mobileView:i,refreshTriggered:t,onRefreshing:a,onInitialLoad:s})})},I=e=>{let{reload:t,isRefreshing:a,hasLoadedInitialFeed:s}=e,i=(0,x.useRouter)(),{userId:l}=(0,g.Z)(),[o,u]=(0,c.useState)(i.query.path&&"private"===i.query.path?"yours":"all");return l||s?(0,r.jsxs)("div",{className:"flex justify-between gap-4 pb-4",children:[l&&(0,r.jsx)("div",{className:"flex-grow",children:(0,r.jsxs)(y,{value:o,onValueChange:e=>{u(e),"all"===e?i.push("/feed"):"yours"===e&&i.push("/feed?path=private",void 0,{shallow:!0})},children:[(0,r.jsx)(b,{className:"w-full max-w-[15rem]",children:(0,r.jsx)(N,{})}),(0,r.jsxs)(C,{children:[(0,r.jsx)(Z,{value:"all",children:"All Snips"}),(0,r.jsx)(R(),{href:"/feed?path=private",children:(0,r.jsx)(Z,{value:"yours",children:"Your Snips"})})]})]})}),s&&(0,r.jsx)("div",{className:(0,n.cn)("flex justify-end h-8 items-center",!l&&"w-full"),children:(0,r.jsx)("button",{disabled:a,onClick:()=>t(),className:"text-primary-300 hover:text-primary-0 active:text-primary-400 transition duration-200 ease-in-out",children:a?(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)(d.Z,{small:!0})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})})})]}):(0,r.jsx)(r.Fragment,{})},F=()=>{let{query:e}=(0,x.useRouter)(),{isExpanded:t}=(0,l.$)(),[a,d]=(0,c.useState)(!1),[o,u]=(0,c.useState)(),[m,h]=(0,c.useState)(!1),p=(0,c.useCallback)(()=>{h(e=>!e)},[]),{isLg:f}=(0,i.Z)();return(0,r.jsx)(s.Z,{header:{title:"Feed"},content:{padding:!0,align:"center",css:(0,n.cn)(f?"max-w-7xl mx-auto p-0":"max-w-4xl mx-auto")},children:f?(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{style:{alignSelf:"flex-start"},className:"max-w-[15rem] w-full sticky top-0 py-4 pl-4",children:(0,r.jsx)(I,{reload:p,isRefreshing:o,hasLoadedInitialFeed:a})}),(0,r.jsx)("div",{className:"flex-grow max-w-4xl p-4",children:(0,r.jsx)(_,{mobileView:!f,refreshTriggered:m,onRefreshing:e=>{u(null!=e&&e)},onInitialLoad:()=>{d(!0)}})})]}):(0,r.jsx)(_,{mobileView:!f,refreshTriggered:m,onRefreshing:e=>{u(null!=e&&e)},onInitialLoad:()=>{d(!0)}})})};var S=F}},function(e){e.O(0,[8907,4885,9879,6430,4084,378,2646,5591,7327,2551,6405,5917,5424,5151,829,9774,2888,179],function(){return e(e.s=67127)}),_N_E=e.O()}]);