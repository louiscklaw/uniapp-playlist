"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{53212:function(e,t,s){s.d(t,{B:function(){return o}});var a=s(85893),r=s(75858),i=s(94404),n=s(11163);let l=e=>{let{type:t="default",selectedPage:s,setSelectedPage:n}=e,l={general:{label:"General",selector:"general"},data:{label:"Knowledge",selector:"data",hidden:!i.bP},integrate:{label:"Integrate",selector:"integrate"},model:{label:"Model",selector:"model"}};if("popup"===t)return(0,a.jsx)("div",{className:"mb-4 flex gap-4 border-b border-primary-700",children:(0,a.jsx)(r.m,{option:"selector",selectors:l,currentSelector:s,onTabClick:n})})};t.Z=l;let o=e=>{let{username:t,slug:s}=e,l=(0,n.useRouter)(),o={general:{genericPrefix:"/[username]/[slug]",dynamicPrefix:"/".concat(t,"/").concat(s),core:"/settings",label:"General"},data:{genericPrefix:"/[username]/[slug]",dynamicPrefix:"/".concat(t,"/").concat(s),core:"/settings/data",label:"Knowledge",hidden:!i.bP},integrate:{genericPrefix:"/[username]/[slug]",dynamicPrefix:"/".concat(t,"/").concat(s),core:"/settings/integrate",label:"Integrate"},model:{genericPrefix:"/[username]/[slug]",dynamicPrefix:"/".concat(t,"/").concat(s),core:"/settings/model",label:"Model"}};if(!(t&&s))return(0,a.jsx)(a.Fragment,{});let d=e=>{l.push(e,void 0,{shallow:!0})};return(0,a.jsx)("div",{className:"gap-2 flex text-primary-0",children:(0,a.jsx)(r.m,{option:"path",paths:o,currentPath:l.pathname,onTabClick:d})})}},20220:function(e,t,s){s.d(t,{Z:function(){return eg}});var a=s(85893),r=s(14323),i=s(67294),n=s(35377),l=s(20272),o=s(67091),d=s(45830),c=s(73069),u=s(8583),m=s(44781),x=s(21469),h=s(11163),p=s(72749);let g=e=>{let{chatbot:t,closePopup:s}=e,r=(0,h.useRouter)(),{userId:i}=(0,o.Z)();return(0,a.jsx)(v,{title:"Delete Chatbot",description:"This Chatbot will be permanently deleted. This action cannot be undone.",onDelete:async()=>{if(!i){console.warn("skip API call to delete chatbot due to undefined userId");return}let e=await d.x.deleteChatbot({id:t.id,userId:i});if(e.ok)s?s():r.push("/dashboard"),(0,u.Q)("Successfully deleted!");else{let t=await e.json();(0,u.J)(t.error&&t.error.message?t.error.message:"Something went wrong")}}})},v=e=>{let{title:t,description:s,onDelete:r}=e,[l,o]=(0,i.useState)(!1);return(0,a.jsx)("div",{className:"rounded-lg border border-red-500 dark:border-red-800",children:(0,a.jsxs)("div",{className:"rounded-t bg-transparent p-4 flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"font-medium text-lg",children:t}),(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-between flex-wrap",children:[s&&(0,a.jsx)(p.d2,{children:s}),(0,a.jsx)("div",{className:"flex justify-end"}),l?(0,a.jsxs)("div",{className:"py-1 px-2 text-base bg-red-500 dark:bg-red-800 text-red-100 rounded-lg select-none transition duration-200 ease-in-out flex items-center gap-2",children:[(0,a.jsx)(n.Z,{small:!0})," Delete Chatbot"]}):(0,a.jsx)("button",{onClick:async()=>{o(!0),await r(),o(!1)},className:"py-1 px-2 text-base bg-red-600 dark:bg-red-800 hover:bg-red-500 dark:hover:bg-red-600 text-white rounded-lg cursor-pointer transition duration-200 ease-in-out",children:"Delete Chatbot"})]})]})})};var b=s(34993),f=s(63031),j=s(75846),y=s(90414),w=s(28174);let N=e=>{var t,s;let{botParams:i,setBotParams:l}=e,{profile:o}=(0,m.O)();return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(p.yH,{css:"pb-1",required:!0,children:"URL Slug"}),(0,a.jsxs)("div",{className:"border border-primary-600 rounded-lg flex items-center shadow-sm ",children:[(0,a.jsxs)("div",{className:"p-2 bg-primary-800 dark:bg-primary-900 rounded-l-lg text-primary-500 font-light select-none flex items-center ",children:["ora.ai/",o&&o.username?(0,a.jsx)("span",{className:"line-clamp-1",children:o.username}):(0,a.jsxs)("div",{className:"flex items-center px-2",children:[" ",(0,a.jsx)(n.Z,{small:!0})]}),"/"]}),(0,a.jsx)("div",{className:(0,r.cn)("border-l border-primary-600 focus-within:border-none hover:ring-1 focus-within:ring-1","hover:ring-primary-500 focus-within:ring-primary-400","bg-white dark:bg-primary-800","w-full rounded-r-lg transition duration-200 ease-in-out"),children:(0,a.jsx)("input",{placeholder:null!==(t=i.slug)&&void 0!==t?t:"Slug",value:null!==(s=i.slug)&&void 0!==s?s:void 0,onChange:e=>{let t=e.target.value.toLowerCase();l(e=>({...e,slug:t}))},className:"p-2 bg-transparent focus:outline-none focus:ring-0 w-full "})})]})]})};var k=s(11798),C=s(51575);s(70385);let S=e=>{var t,s,r,p,v,S,B;let{chatbot:Z,mutate:P,popupView:K=!1,closePopup:R}=e,[L,I]=(0,i.useState)(!0),[E,M]=(0,i.useState)(!1),[O,A]=(0,i.useState)({prompt:Z.creationPrompt,name:null!==(t=Z.name)&&void 0!==t?t:"",emoji:null!==(s=Z.emoji)&&void 0!==s?s:"",slug:null!==(r=Z.slug)&&void 0!==r?r:void 0,boosted:null!==(p=Z.boosted)&&void 0!==p&&p,description:null!==(v=Z.description)&&void 0!==v?v:void 0,category:null!==(S=Z.category)&&void 0!==S?S:void 0,defaultBotMessage:null!==(B=Z.defaultBotMessage)&&void 0!==B?B:void 0,visibility:(Z.visibility,Z.visibility)}),T=(0,h.useRouter)(),{userId:H}=(0,o.Z)(),{profile:z,isSubscribed:F}=(0,m.O)();(0,i.useEffect)(()=>{z&&I(!1)},[z]);let V=async()=>{let e=Object.keys(O).reduce((e,t)=>"prompt"===t?(O[t]!==Z.creationPrompt&&(e[t]=O[t]),e):"boosted"===t||"visibility"===t?(O[t]!==Z[t]&&(e[t]=O[t]),e):(Z[t]&&O[t]!==Z[t]?e[t]=O[t]:Object.keys(Z).includes(t)&&O[t]!==Z[t]&&(e[t]=O[t]),e),{});if(Object.keys(e).length<=0||!H)return;M(!0);let t=await d.x.editChatbot({id:Z.id,userId:H,...e});if(200===t.status)e.slug&&!K&&z&&T.push("/".concat(z.username,"/").concat(e.slug,"/settings")),(0,u.Q)("Successfully saved!"),P&&P();else{let e=await t.json();(0,u.J)(e.error&&e.error.message?e.error.message:"Something went wrong")}return M(!1)};return L?(0,a.jsx)("div",{className:"p-4 flex justify-center mx-auto",children:(0,a.jsx)(n.Z,{})}):H&&Z.createdByUsername?(0,a.jsxs)("div",{className:"flex flex-col h-full rounded  ",children:[(0,a.jsxs)(x.E.div,{variants:c._W,initial:"hidden",animate:"show",className:"flex flex-col gap-4",children:[(0,a.jsx)(C.Z,{botParams:O,setBotParams:A,isSubscribed:F}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)("div",{className:"max-w-2xl",children:(0,a.jsx)(y.y,{botParams:O,setBotParams:A})}),(0,a.jsx)("div",{className:"max-w-2xl",children:(0,a.jsx)(N,{botParams:O,setBotParams:A})})]}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(w.Z,{botParams:O,setBotParams:A,placeholder:"Chatbot Instructions"}),(0,a.jsx)(f.Z,{botParams:O,setBotParams:A})]}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(j.Z,{botParams:O,setBotParams:A}),(0,a.jsx)(b.Z,{botParams:O,setBotParams:A})]}),(0,a.jsx)("div",{className:"flex justify-end",children:E?(0,a.jsxs)("div",{className:"select-none bg-chat-blue px-2 py-1 text-base rounded-lg text-white transition duration-200 ease-in-out flex items-center gap-2",children:[(0,a.jsx)(n.Z,{small:!0,className:"text-primary-900"})," ","Save changes"]}):(0,a.jsx)(l.KM,{padding:"tight",fontSize:"base",disabled:Object.keys(O).length<=0,onClick:V,children:"Save changes"})})]}),(0,a.jsx)("div",{className:"mt-16 rounded-lg",children:(0,a.jsx)(g,{chatbot:Z,closePopup:R})})]}):(0,a.jsx)("div",{children:"something went wrong "})};var B=s(53212),Z=s(13216),P=s(84283),K=s(90305),R=s(41664),L=s.n(R);let I=s(56929).Z,E=s(96993).Z;Z.Z.registerLanguage("jsx",I),Z.Z.registerLanguage("html",E);let M=e=>{let{chatbot:t,popupView:s,close:r}=e,{userId:l}=(0,o.Z)(),[d,c]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{l&&c(!1)},[l]),d)?(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(n.Z,{})}):l&&t.createdByUsername?(0,a.jsx)("div",{className:"pb-12",children:(0,a.jsx)(k.Z,{children:(0,a.jsx)(O,{popupView:s,chatbotId:t.id,isBoosted:t.boosted})})}):(0,a.jsx)("div",{children:"something went wrong "})},O=e=>{let{chatbotId:t,isBoosted:s,popupView:n}=e,[l,d]=(0,i.useState)(!1),[c,x]=(0,i.useState)(!0),{userId:g}=(0,o.Z)(),{profile:v}=(0,m.O)(),{query:b}=(0,h.useRouter)(),[f,j]=(0,i.useState)("react");(0,i.useEffect)(()=>{g&&v&&v.stripeSubscriptionId?y({userId:g,subscriptionId:v.stripeSubscriptionId}):g&&v&&x(!1)},[g,v]);let y=async e=>{let t=new K.L;try{let s=await t.getSubscription({...e});s&&"active"===s.status?d(!0):d(!1)}catch(e){}x(!1)},w="".concat('<div style={{ height: "600px", width: "400px" }}>\n    <iframe\n        src={`'.concat((0,r.pi)(),"embed/").concat(t,'`}\n        width="100%"\n        height="100%"\n        style={{ border: "0", borderRadius: "4px" }}\n    />\n</div>')),N="".concat('<div style="height:600px; width:400px">\n    <iframe\n        src="'.concat((0,r.pi)(),"embed/").concat(t,'"\n        width="100%"\n        height="100%"\n        style="border:0; border-radius: 4px"\n    />\n</div>'));return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:(0,r.cn)("flex justify-between items-center gap-2"),children:[(0,a.jsxs)("div",{className:"flex-grow ",children:[(0,a.jsx)(p.yH,{children:"Widget"}),(0,a.jsx)(p.d2,{children:"Embed the chatbot in your website"})]}),(0,a.jsxs)("div",{className:" flex gap-2 items-center justify-end",children:[(0,a.jsx)("div",{className:"".concat("react"===f?"bg-primary-600 dark:bg-primary-0-fade/20":"bg-transparent hover:bg-primary-650 dark:hover:bg-primary-0-fade/10 ","   rounded-lg px-2 py-1 cursor-pointer border-primary-600 border"),onClick:()=>{j("react")},children:"React"}),(0,a.jsx)("div",{className:"".concat("html"===f?"bg-primary-600 dark:bg-primary-0-fade/20":"bg-transparent hover:bg-primary-650 dark:hover:bg-primary-0-fade/10 ","   rounded-lg px-2 py-1 cursor-pointer border-primary-600 border"),onClick:()=>{j("html")},children:"HTML"})]})]}),!c&&!l&&(0,a.jsxs)("div",{className:(0,r.cn)("text-base text-gray-600 dark:text-gray-500 flex justify-start items-center gap-1"),children:[(0,a.jsx)("div",{className:"md:block hidden",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)(L(),{href:"/settings/account",className:"underline",children:"Subscription"})," ","required to enable unauthenticated users to chat with your embedded bot."]})]}),!c&&l&&!s&&(0,a.jsxs)("div",{className:(0,r.cn)("text-base text-gray-600 dark:text-gray-500 flex justify-start items-center gap-1"),children:[(0,a.jsx)("div",{className:"md:block hidden",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)(L(),{href:"/".concat(b.username,"/").concat(b.slug,"/settings"),className:"underline",children:"Boost chatbot"})," ","to enable unauthenticated users to chat with your embedded bot."]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("div",{onClick:async()=>{await (0,r.vQ)({text:"react"===f?w:N,onSuccess:()=>(0,u.Q)("Copied to clipboard!"),onError:e=>(0,u.J)("Copy to clipboard failed!")})},className:" cursor-pointer absolute bottom-3 right-2 rounded-full w-8 h-8  bg-primary-900 hover:bg-primary-900/50 active:bg-primary-900/20 hidden group-hover:flex items-center justify-center transition duration-200 ease-in-out",children:[" ",(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})})]}),"react"===f?(0,a.jsx)(Z.Z,{className:"rounded text-sm",language:"jsx",style:P.pJ,showLineNumbers:!0,children:w}):(0,a.jsx)(Z.Z,{className:"rounded text-sm",language:"html",style:P.pJ,showLineNumbers:!0,children:N})]})}),(0,a.jsx)("div",{className:(0,r.cn)("flex justify-between items-center gap-2 text-sm text-gray-600 dark:text-gray-500"),children:"Simply copy this code snippet and paste it into your website to display and use your chatbot."})]})};var A=s(88936);s(26887);let T=e=>{var t,s,r,i;let{param:n,selectedParams:l,setSelectedParams:o}=e,d=e=>{let t=l.map(t=>(t.name===n.name&&(t.value=e),t));o(t)};return(0,a.jsxs)("div",{className:"bg-primary-650 p-4 rounded-lg ",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,a.jsx)("div",{className:"font-medium leading-6 text-gray-100",children:n.name}),(0,a.jsx)("div",{children:null!==(r=null===(t=l.find(e=>e.name===n.name))||void 0===t?void 0:t.value)&&void 0!==r?r:n.default})]}),(0,a.jsx)("div",{className:"mt-2 h-10 flex items-center",children:(0,a.jsx)(A.Z,{value:null!==(i=null===(s=l.find(e=>e.name===n.name))||void 0===s?void 0:s.value)&&void 0!==i?i:n.default,min:n.minValue,max:n.maxValue,step:n.step,onChange:d})})]})};var H=s(8275),z=s(96093),F=s(79597),V=s(17106),q=s(23735);let W=e=>(0,a.jsxs)("div",{className:"flex justify-between w-full items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("div",{className:(0,r.AK)("soon"===e.status?"filter grayscale text-gray-400 font-normal":"text-primary-0"),children:e.model})}),"soon"===e.status&&(0,a.jsx)("div",{className:"text-xs text-gray-400 bg-primary-600 px-2 py-1 rounded-full",children:"coming soon"})]}),J=e=>{let{label:t,selected:s,setSelected:n,options:l}=e;return(0,a.jsx)(F.R,{value:s,onChange:n,children:e=>{let{open:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative mt-2",children:[(0,a.jsxs)(F.R.Button,{className:(0,r.cn)("relative w-full cursor-pointer rounded-lg","bg-white dark:bg-primary-800 h-14 pl-3 pr-10 text-left shadow-sm ring-inset ","focus:outline-none ring-none active:ring-1 active:ring-primary-600","border border-primary-600","hover:bg-primary-900 dark:hover:bg-primary-700","transition duration-200 ease-in-out"),children:[(0,a.jsx)("span",{className:"block truncate text-primary-0",children:s}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(q.XL,{})})]}),(0,a.jsx)(V.u,{show:t,as:i.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(F.R.Options,{className:(0,r.cn)("absolute z-10 p-1 mt-2 max-h-60 w-full overflow-auto","rounded-md text-base","drop-shadow-xl","ring-1 ring-primary-700 focus:outline-none ","bg-white dark:bg-primary-800"),children:l.sort((e,t)=>"active"===e.status&&"active"!==t.status?-1:"active"!==e.status&&"active"===t.status?1:0).map((e,t)=>(0,a.jsx)(F.R.Option,{className:t=>{let{active:s}=t;return(0,r.cn)(s?"bg-primary-800 dark:dark:bg-primary-700 text-primary-0":"text-gray-900","active"===e.status&&"cursor-pointer","relative select-none py-2 pl-3 pr-9","rounded-lg")},disabled:"active"!==e.status,value:e.model,children:t=>{let{selected:s,active:i}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:(0,r.AK)(s?"font-medium":"font-light","flex gap-2 items-center truncate"),children:W(e)}),s?(0,a.jsx)("span",{className:(0,r.AK)("text-blue-500","absolute inset-y-0 right-0 flex items-center pr-4"),children:(0,a.jsx)(q.NO,{size:"md",strokeWidth:3})}):null]})}},t))})})]})})}})};var U=s(29260),D=s.n(U);let _=(e,t)=>{let s=z.f4.find(t=>t.provider===e);return s?(0,a.jsxs)("div",{className:"flex justify-between w-full items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 ",children:[s.logo&&(0,a.jsx)("div",{className:"w-7 h-7 flex items-center justify-center bg-black rounded-full p-1",children:(0,a.jsx)(D(),{src:s.logo,alt:e,width:t?30:23,height:t?30:23,className:(0,r.AK)("soon"===s.status?"filter grayscale text-gray-400":"")})}),(0,a.jsx)("div",{className:(0,r.AK)("soon"===s.status?"filter grayscale text-gray-400 font-normal":"text-primary-0"),children:s.displayName})]}),"soon"===s.status&&(0,a.jsx)("div",{className:"text-xs text-gray-400 bg-primary-600 px-2 py-1 rounded-full",children:"coming soon"})]}):e},X=e=>{let{label:t,selected:s,setSelected:n,options:l}=e;return(0,a.jsx)(F.R,{value:s,onChange:n,children:e=>{let{open:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative mt-2",children:[(0,a.jsxs)(F.R.Button,{className:(0,r.cn)("relative w-full cursor-pointer rounded-lg","bg-white dark:bg-primary-800 h-14 pl-3 pr-10 text-left shadow-sm ring-inset ","focus:outline-none ring-none active:ring-1 active:ring-primary-600","border border-primary-600","hover:bg-primary-900 dark:hover:bg-primary-700","transition duration-200 ease-in-out"),children:[(0,a.jsx)("span",{className:"block truncate",children:_(s,!0)}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(q.XL,{})})]}),(0,a.jsx)(V.u,{show:t,as:i.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(F.R.Options,{className:(0,r.cn)("absolute z-10 p-1 mt-2 max-h-60 w-full overflow-auto","rounded-md text-base","drop-shadow-xl","ring-1 ring-primary-700 focus:outline-none ","bg-white dark:bg-primary-800"),children:l.sort((e,t)=>"active"===e.status&&"active"!==t.status?-1:"active"!==e.status&&"active"===t.status?1:0).map((e,t)=>(0,a.jsx)(F.R.Option,{className:t=>{let{active:s}=t;return(0,r.cn)(s?"bg-primary-800 dark:bg-primary-700 text-primary-0":"text-gray-900","active"===e.status&&"cursor-pointer","relative select-none py-2 pl-3 pr-9","rounded-lg")},disabled:"active"!==e.status,value:e.provider,children:t=>{let{selected:s,active:i}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:(0,r.AK)(s?"font-medium":"font-light","flex gap-2 items-center truncate"),children:_(e.provider)}),s?(0,a.jsx)("span",{className:(0,r.AK)("text-blue-500","absolute inset-y-0 right-0 flex items-center pr-4"),children:(0,a.jsx)(q.NO,{size:"md",strokeWidth:3})}):null]})}},t))})})]})})}})},G=e=>{let{userId:t,chatbotId:s,model:l,userIsSubscribed:o,popupView:c,mutate:m}=e;(0,h.useRouter)();let[x,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),[f,j]=(0,i.useState)(l.provider),[y,w]=(0,i.useState)(l.name),[N,C]=(0,i.useState)([]);return(0,i.useEffect)(()=>{if(v){let e=(0,z.qX)(f);e.length>0&&w(e[0])}else b(!0)},[f]),(0,i.useEffect)(()=>{let e=(0,z.bs)(f,y);C(l.name===y&&l.provider===f?e.map(e=>{var t;return{...e,value:null!==(t=l.config[e.name])&&void 0!==t?t:e.default}}):e.map(e=>({...e,value:e.default})))},[y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.Z,{children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(p.yH,{children:"Model"}),(0,a.jsx)(p.d2,{children:"Select between a variety of models to power your chatbot."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)(X,{label:"Provider",selected:f,setSelected:j,options:z.nR})}),(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)(J,{label:"Model",selected:y,setSelected:w,options:(0,z.dB)(f)})})]})," "]}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(p.yH,{children:"Parameters"}),(0,a.jsx)(p.d2,{children:"Tweak a variety of parameters to customize your chatbot."}),N&&0!==N.length?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:N.map((e,t)=>"slider"!==e.type?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)(T,{param:e,selectedParams:N,setSelectedParams:C})},t))}):(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"text-sm px-2 py-1 rounded-full bg-primary-800 text-primary-400 italic",children:"coming soon"})})]})]}),o||!(0,r.a3)({provider:f,model:y})?(0,a.jsx)("div",{className:"flex justify-end",children:x?(0,a.jsxs)("div",{className:"text-white select-none flex items-center gap-2 bg-chat-blue px-2 py-1 rounded-lg transition duration-200 ease-in-out",children:[(0,a.jsx)(n.Z,{small:!0,className:"text-white"})," ","Save changes"]}):(0,a.jsx)("button",{className:"text-white bg-chat-blue hover:bg-blue-500 px-2 py-1 rounded-lg text-base transition duration-200 ease-in-out",onClick:async()=>{g(!0);let e={};N.forEach(t=>{e[t.name]=t.value});let a=await d.x.editChatbotConfiguration({id:s,userId:t,provider:f,config:{model:y,...e}});a.ok?((0,u.Q)("Model updated successfully"),m&&m()):(0,u.J)("Failed to update model"),g(!1)},children:"Save changes"})}):(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(Q,{className:"text-white bg-chat-blue hover:bg-blue-500 px-2 py-1 rounded-lg text-base transition duration-200 ease-in-out cursor-pointer",children:"Save changes"})})]})},Q=e=>{let{className:t,children:s}=e;return(0,a.jsxs)(H.Vq,{children:[(0,a.jsx)("div",{className:"flex items-center justify-center ",children:(0,a.jsx)(H.hg,{className:(0,r.AK)("focus:outline-none border-none ring-none",t),children:s})}),(0,a.jsxs)(H.cZ,{className:(0,r.AK)("max-w-[400px] w-[95%] md:w-full p-4 max-h-[90%] overflow-auto"),children:[(0,a.jsx)(H.$N,{className:"text-xl",children:"Subscription Required"}),(0,a.jsx)(H.Be,{className:(0,r.AK)("text-primary-300","flex gap-2 flex-grow"),children:"A pro subscription is required to choose premium models. To proceed please subscribed to a pro plan."}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(L(),{href:"/settings/account",children:(0,a.jsx)(l.KM,{padding:"tight",fontSize:"sm",children:"Continue"})})})]})]})};var $=s(37874);let Y=e=>{var t,s,l,d;let{chatbot:u,popupView:h,close:p,mutate:g}=e,{userId:v}=(0,o.Z)(),[b,f]=(0,i.useState)(!0),{isSubscribed:j,loading:y}=(0,m.O)();return((0,i.useEffect)(()=>{v&&f(!1)},[v]),b)?(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(n.Z,{})}):v&&u.createdByUsername?(0,a.jsxs)("div",{className:(0,r.AK)("pb-12"),children:[(0,a.jsx)($.Z,{isRequired:!y&&!j,mobileMessage:"to choose premium models.",desktopMessage:"Subscription required to choose premium models."}),(0,a.jsx)("div",{className:"col-span-3 flex flex-col h-full",children:(0,a.jsx)("div",{className:"flex-grow flex flex-col h-full rounded ",children:(0,a.jsx)(x.E.div,{variants:c._W,initial:"hidden",animate:"show",className:"flex flex-col gap-4",children:(null===(t=u.config)||void 0===t?void 0:t.data.model)&&(0,a.jsx)(G,{chatbotId:u.id,model:{provider:null===(s=u.config)||void 0===s?void 0:s.provider,name:null===(l=u.config)||void 0===l?void 0:l.data.model,config:null===(d=u.config)||void 0===d?void 0:d.data},userId:v,userIsSubscribed:j,popupView:h,mutate:g})})})})]}):(0,a.jsx)("div",{children:"something went wrong "})};var ee=s(95591),et=s(93707),es=s(75080);let ea=e=>{let{openSheet:t,setOpenSheet:s,handleConnectNewBucket:r}=e;return(0,a.jsx)(es.yo,{open:t,onOpenChange:e=>s(e),children:(0,a.jsx)(es.ue,{side:"right",className:"sm:max-w-[35rem] w-full bg-primary-900",children:(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsx)(et.r,{onSubmitEnd:(e,t)=>{e.bucketId&&r(e.bucketId),null==t||t(),s(!1)}})})})})},er=e=>{let{connectedBucket:t,loadingConnectionUpdate:s,loadingDisconnect:i,setLoadingDisconnect:l,setSelected:o,mutateConnectedBucket:c,userId:m,chatbotId:x}=e;return(0,a.jsx)(a.Fragment,{children:t&&(0,a.jsx)("button",{className:(0,r.cn)("text-primary-0 w-8 flex items-center justify-center",i||s?"cursor-not-allowed":"hover:text-red-500"),disabled:s||i,onClick:async()=>{l(!0);try{await d.x.updateBucketToChatbotConnection({userId:m,bucketId:t.id,chatbotId:x},"disconnect")}catch(e){(0,u.J)("Error disconnecting bucket")}await c(),l(!1),o(void 0)},children:i?(0,a.jsx)(n.Z,{small:!0}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})};var ei=s(24125),en=s(99232);let el=e=>{let{loading:t,selected:s,setOpenSheet:n,allBuckets:o,isSubscribed:d,handleConnectNewBucket:c}=e,[u,m]=(0,i.useState)(!1),x=(0,i.useMemo)(()=>null==o?void 0:o.filter(e=>s&&e.id===s)[0],[o,s]);return(0,i.useMemo)(()=>null==x?void 0:x.active,[x]),(0,a.jsxs)(en.h_,{open:u,onOpenChange:e=>m(e),children:[(0,a.jsx)(en.$F,{disabled:t,className:(0,r.cn)(x&&(0,r.cn)("rounded-lg border border-[#E4E4E7] dark:border-primary-700 p-3","bg-white dark:bg-primary-800 hover:bg-[rgba(0,0,0,0.03)] dark:hover:bg-[rgba(255,255,255,0.03)]",u&&"bg-[rgba(0,0,0,0.03)] dark:bg-[rgba(255,255,255,0.03)] ","shadow-sm transition-all duration-200 ease-in-out",t?"cursor-not-allowed":"cursor-pointer","flex flex-col gap-1"),"w-96"),children:x?(0,a.jsx)(ei.Z,{bucket:x}):(0,a.jsx)("div",{className:(0,r.cn)("flex items-center gap-1 rounded-lg transition duration-200 ease-in-out","bg-chat-blue hover:bg-blue-700 active:bg-blue-800 text-white","text-center w-full flex justify-center","px-4 py-2"),children:"Add knowledge base"})}),(0,a.jsx)(en.AW,{className:"w-96 max-h-72 overflow-y-auto flex flex-col gap-2 py-2",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(en.Ju,{children:"Choose Knowledge Base"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:null==o?void 0:o.filter(e=>e.id!==s).map(e=>(0,a.jsx)(eo,{bucket:e,handleConnectNewBucket:c},e.id))})]}),(0,a.jsx)(en.VD,{className:"border-b border-primary-700 "}),(0,a.jsxs)("div",{children:[(0,a.jsx)(en.Ju,{children:"Create Knowledge Base"}),(0,a.jsxs)(en.Xi,{onClick:e=>{e.preventDefault(),m(!1),n(!0)},className:"w-full hover:bg-[rgba(0,0,0,0.03)] dark:hover:bg-[rgba(255,255,255,0.03)] rounded-lg py-2 cursor-pointer flex items-center gap-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Create New"]})]})]}):(0,a.jsxs)("div",{className:"p-4 flex flex-col gap-4",children:[" ",(0,a.jsx)(H.$N,{className:"text-xl",children:"Subscription Required"}),(0,a.jsx)(H.Be,{className:(0,r.cn)("text-primary-300","flex gap-2 flex-grow"),children:"A subscription is required to use the Knowledge Hub and train your chatbots. To proceed please subscribe to a premium plan."}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(L(),{href:"/settings/account",children:(0,a.jsx)(l.KM,{padding:"tight",fontSize:"sm",children:"Continue"})})})]})})]})},eo=e=>{let{bucket:t,handleConnectNewBucket:s}=e;return(0,i.useMemo)(()=>null==t?void 0:t.active,[t]),(0,a.jsx)(en.Xi,{className:"flex flex-col hover:bg-[rgba(0,0,0,0.03)] dark:hover:bg-[rgba(255,255,255,0.03)] rounded-lg cursor-pointer",onClick:async e=>{s(t.id)},children:(0,a.jsx)(ei.Z,{bucket:t})},t.id)};var ed=s(814);let ec=e=>{let{chatbotId:t,userId:s,isSubscribed:r,loadingConnectionUpdate:l,setLoadingConnectionUpdate:o}=e,[c,m]=(0,i.useState)(),[x,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),{data:v,mutate:b}=(0,ee.ZP)(r?d.x.url("listBuckets",{userId:s}):null,(0,ed.SK)(ed.uP,"buckets")),{data:f,isLoading:j,mutate:y}=(0,ee.ZP)(r?d.x.url("listBuckets",{userId:s,chatbotId:t}):null,(0,ed.SK)(ed.k7,"connected bucket"));(0,i.useEffect)(()=>{!c&&f&&m(f.id)},[f]);let w=async e=>{o(!0),m(e);let a=[];f&&a.push(d.x.updateBucketToChatbotConnection({userId:s,bucketId:f.id,chatbotId:t},"disconnect")),a.push(d.x.updateBucketToChatbotConnection({userId:s,bucketId:e,chatbotId:t},"connect"));try{await Promise.all(a)}catch(e){(0,u.J)("Error connecting bucket")}await b(),await y(),o(!1)};return(0,a.jsxs)("div",{className:"flex flex-col",children:[j?(0,a.jsx)(n.Z,{}):(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)(el,{loading:l||x,isSubscribed:r,selected:c,setOpenSheet:g,allBuckets:v,handleConnectNewBucket:w}),(0,a.jsx)(er,{connectedBucket:f,loadingConnectionUpdate:l,loadingDisconnect:x,setLoadingDisconnect:h,setSelected:m,mutateConnectedBucket:y,userId:s,chatbotId:t})]}),(0,a.jsx)(ea,{openSheet:p,setOpenSheet:g,handleConnectNewBucket:w})]})};var eu=s(24831),em=s(46018);let ex=e=>{let{chatbot:t,close:s}=e,{userId:r}=(0,o.Z)(),{isSubscribed:l,loading:d}=(0,m.O)(),[c,u]=(0,i.useState)(!0),[x,h]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{r&&u(!1)},[r]),c)?(0,a.jsx)("div",{children:"loading"}):r&&t.createdByUsername?(0,a.jsxs)("div",{className:"pb-12",children:[(0,a.jsx)($.Z,{isRequired:!d&&!l,mobileMessage:"to connect a Knowledge base.",desktopMessage:"Subscription required to connect a Knowledge Base."}),(0,a.jsxs)(k.Z,{className:"flex flex-col gap-6 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-start",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Knowledge Base"}),(0,a.jsx)(em.Z,{})]}),(0,a.jsx)(eu.Z,{})]}),(0,a.jsx)("p",{className:"text-gray-500 text-sm pt-2",children:"Connect a Knowledge Base to fine tune your chatbot with additional knowledge. This means that for every additional message you send, the chatbot will be able to take into account the data you have connected and respond accordingly."})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Connected Knowledge Base"}),x&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(n.Z,{small:!0}),"saving..."]})]}),(0,a.jsx)(ec,{chatbotId:t.id,userId:r,isSubscribed:l,loadingConnectionUpdate:x,setLoadingConnectionUpdate:h})]})]})]}):(0,a.jsx)("div",{children:"something went wrong "})};var eh=s(94404);let ep=e=>{let{chatbot:t,tab:s,type:n="default",mutate:l,closePopup:o}=e,[d,c]=(0,i.useState)(null!=s?s:"general");return t.createdByUsername?(0,a.jsxs)("div",{className:"",children:["popup"!==n&&(0,a.jsx)("div",{className:"pb-4",children:(0,a.jsx)(L(),{href:(0,r.cb)({id:t.id,username:t.createdByUsername,slug:t.slug}),children:(0,a.jsxs)("button",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(q.vj,{strokeWidth:1}),"Back to Chat"]})})}),"popup"===n&&(0,a.jsx)(B.Z,{username:t.createdByUsername,slug:t.slug,type:n,selectedPage:d,setSelectedPage:c}),"general"===d&&(0,a.jsx)(S,{chatbot:t,mutate:l,popupView:"popup"===n,closePopup:o}),eh.bP&&"data"===d&&(0,a.jsx)("div",{children:(0,a.jsx)(ex,{chatbot:t})}),"integrate"===d&&(0,a.jsx)("div",{children:(0,a.jsx)(M,{chatbot:t,popupView:"popup"===n})}),"model"===d&&(0,a.jsx)(Y,{chatbot:t,popupView:"popup"===n,mutate:l})]}):(0,a.jsx)("div",{children:"something went wrong "})};var eg=ep},75080:function(e,t,s){s.d(t,{ue:function(){return m},yo:function(){return o}});var a=s(85893),r=s(67294),i=s(12854),n=s(12003),l=s(14323);let o=i.fC;i.xz,i.x8;let d=e=>{let{className:t,...s}=e;return(0,a.jsx)(i.h_,{className:(0,l.cn)(t),...s})};d.displayName=i.h_.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});c.displayName=i.aV.displayName;let u=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b border-border-light dark:border-border-dark data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t border-border-light dark:border-border-dark data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r border-border-light dark:border-border-dark data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l border-border-light dark:border-border-dark data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=r.forwardRef((e,t)=>{let{side:s="right",className:r,children:n,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,l.cn)(u({side:s}),"bg-white dark:bg-primary-900",r),...o,children:[n,(0,a.jsx)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:(0,a.jsx)("span",{className:"sr-only",children:"Close"})})]})]})});m.displayName=i.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="SheetHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="SheetFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",s),...r})});p.displayName=i.Dx.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=i.dk.displayName},96093:function(e,t,s){s.d(t,{f4:function(){return r},Fi:function(){return o},nR:function(){return c},J5:function(){return d},dB:function(){return n},qX:function(){return i},bs:function(){return l}});var a=s(94804);let r=[{provider:a.gK,status:"active",displayName:"Open AI",logo:"/providers/openai-light.svg",models:[{model:a.Ef,status:"active",parameters:[]},{model:a.HI,status:"active",parameters:[]},{model:a.Wf,status:"active",parameters:[]},{model:a.vu,status:"inactive",parameters:[]}]},{provider:"COHERE",status:"soon",displayName:"Cohere",logo:"/providers/cohere.png",models:[{model:"medium",status:"active",parameters:[]},{model:"xlarge",status:"active",parameters:[]}]},{provider:"ANTHROPIC",status:"active",displayName:"Anthropic",logo:"/providers/anthropic-light.svg",models:[{model:"claude-instant-1",status:"active",parameters:[]},{model:"claude-2",status:"active",parameters:[]}]}],i=e=>{var t,s;return null!==(s=null===(t=r.find(t=>t.provider===e))||void 0===t?void 0:t.models.map(e=>e.model))&&void 0!==s?s:[]},n=e=>{var t,s;return null!==(s=null===(t=r.find(t=>t.provider===e))||void 0===t?void 0:t.models.filter(e=>"inactive"!==e.status).map(e=>({model:e.model,status:e.status})))&&void 0!==s?s:[]},l=(e,t)=>{var s,a,i;return null!==(i=null===(s=null===(a=r.find(t=>t.provider===e))||void 0===a?void 0:a.models.find(e=>e.model===t))||void 0===s?void 0:s.parameters)&&void 0!==i?i:[]},o={"gpt-3.5-turbo":"ChatGPT","gpt-4":"GPT-4","gpt-4-1106-preview":"GPT-4 Turbo","claude-instant-1":"Claude Instant","claude-2":"Claude 2"},d=e=>{var t;let s=null===(t=e.config)||void 0===t?void 0:t.data.model;return s&&o[s]?o[s]:null!=s?s:o["gpt-3.5-turbo"]};r.filter(e=>"active"===e.status).map(e=>e.provider);let c=r.filter(e=>"inactive"!==e.status).map(e=>({provider:e.provider,status:e.status}));"".concat(a.gK,":").concat(a.Ef)}}]);