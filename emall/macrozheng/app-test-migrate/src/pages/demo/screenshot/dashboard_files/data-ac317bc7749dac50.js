(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5081],{51350:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data",function(){return a(39638)}])},3036:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var r=a(85893),s=a(14323),n=a(8275),l=a(93707),i=a(67091),d=a(82852),o=a(17754),c=a(20272),u=a(46885),x=a(67294),m=a(35377),h=a(8583);let p=e=>{let{userId:t,setError:a,submitData:n,onSubmitEnd:l,clearUploadData:i}=e,[d,o]=(0,x.useState)(!1),p=e=>{let t=(0,s.ro)([()=>u.X.validateBucketUpload(e.uploadType,e.uploadData),()=>u.X.validateSourceName(e.sourceName)]);return!t||(a(t),!1)},f=async()=>{a(null);let e=p(n);if(e){o(!0);try{let e=await u.X.upload({bucketId:n.bucketId,uploadType:n.uploadType,uploadData:n.uploadData,sourceName:n.sourceName,userId:t});l({uploadId:null!=e?e:void 0},()=>{e?(0,h.Q)("Upload successful!"):(0,h.J)("Upload failed. Please try again later.")})}catch(e){l({},()=>{(0,h.J)("Upload failed. Please try again later.")})}o(!1),i()}};return(0,r.jsxs)(c.KM,{padding:"tight",className:"px-4 shadow-sm flex items-center gap-2",disabled:d,onClick:f,children:[d&&(0,r.jsx)(m.Z,{small:!0})," Add Data"]})},f=e=>{let{bucketId:t,onSubmitEnd:a}=e,{userId:s}=(0,i.Z)(),{uploadType:n,setUploadType:l,uploadData:c,setUploadData:u,sourceName:x,setSourceName:m,error:h,setError:f}=(0,o.Z)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold text-center",children:"Add Data"}),(0,r.jsx)(d.N,{uploadType:n,uploadData:c,setUploadType:l,setUploadData:u,sourceName:x,setSourceName:m}),h&&(0,r.jsx)("div",{className:"text-red-500 text-sm",children:h}),s?(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(p,{userId:s,setError:f,submitData:{bucketId:t,uploadType:n,uploadData:c,sourceName:x},clearUploadData:()=>{u(void 0)},onSubmitEnd:a})}):(0,r.jsx)("div",{className:"text-center",children:"Login to proceed"})]})};var g=a(41664),j=a.n(g);let v=e=>{let{openDialog:t,setOpenDialog:a,children:i,config:d,onSubmitEnd:o,userIsSubscribed:u,className:x}=e,m=(e,t)=>{o(e,t),a(!1)};return(0,r.jsxs)(n.Vq,{open:t,onOpenChange:e=>a(e),children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(n.hg,{className:(0,s.cn)(x),children:i})}),(0,r.jsx)(n.cZ,{className:(0,s.cn)(u?"max-w-[90%] md:max-w-[800px] w-full p-4 max-h-[90%] md:max-h-[80%] overflow-auto":"max-w-[400px] w-[95%] md:w-full p-4 max-h-[90%]"),children:u?(0,r.jsxs)(r.Fragment,{children:["upload-data"===d.variant?(0,r.jsx)(f,{bucketId:d.bucketId,onSubmitEnd:m}):(0,r.jsx)(l.r,{onSubmitEnd:m})," "]}):(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(n.$N,{className:"text-xl",children:"Subscription Required"}),(0,r.jsx)(n.Be,{className:(0,s.cn)("text-primary-300","flex gap-2 flex-grow"),children:"A subscription is required to use the Knowledge Hub and train your chatbots. To proceed please subscribe to a premium plan."}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(j(),{href:"/settings/account",children:(0,r.jsx)(c.KM,{padding:"tight",fontSize:"sm",children:"Continue"})})})]})})]})};var b=v},79544:function(e,t,a){"use strict";var r=a(85893),s=a(67294);let n=e=>{let{str:t,minLimit:a,maxLimit:n,theme:l}=e,[i,d]=(0,s.useState)(!1),[o,c]=(0,s.useState)("");return(0,s.useEffect)(()=>{t.length<a?(d(!1),c("Min ".concat(a," chars"))):t.length>n?(d(!1),c("Max ".concat(n," chars"))):(d(!0),c("".concat(t.length," / ").concat(n," chars")))},[t]),(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(i?"bg-green-600":"bg-red-600"," flex justify-center items-center mr-2")}),(0,r.jsx)("div",{className:"text-xs font-extralight text-primary-400",children:o})]})};t.Z=n},99863:function(e,t,a){"use strict";var r=a(85893),s=a(14323),n=a(21469),l=a(51526),i=a(73069),d=a(79544),o=a(72749);let c=e=>{let{title:t,description:a,input:c,charCount:u,required:x=!1,error:m}=e;return(0,r.jsxs)("div",{children:[t&&(0,r.jsxs)(o.yH,{css:a?void 0:"pb-1",children:[t,x&&(0,r.jsx)("span",{className:"pl-1 text-red-600",children:"*"})]}),a&&(0,r.jsx)(o.d2,{children:a}),(0,r.jsx)(n.E.textarea,{variants:i.sE,placeholder:c.placeholder,onChange:c.onChange,value:c.value,className:(0,s.cn)("w-full p-2 rounded-lg","focus:outline-none focus:ring-0 placeholder-primary-500","bg-white dark:bg-primary-800","border border-primary-600 focus:border-primary-400 hover:border-primary-500","shadow-sm","transition duration-200 ease-in-out",c.css)}),m&&(0,r.jsx)(o.pd,{error:m}),(0,r.jsx)(l.M,{mode:"wait",children:u&&c.value.length>0&&(0,r.jsx)(d.Z,{str:c.value,minLimit:u.min,maxLimit:u.max,theme:"dark"})})]})};t.Z=c},72749:function(e,t,a){"use strict";a.d(t,{d2:function(){return n},kO:function(){return l},pd:function(){return d},yH:function(){return i.y}});var r=a(85893),s=a(14323);let n=e=>{let{children:t,css:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("text-sm text-gray-500 pb-2",a),children:t})},l=e=>{let{input:t}=e;return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("input",{placeholder:t.placeholder,onChange:t.onChange,value:t.value,className:(0,s.cn)(" w-full p-2  rounded-lg","focus:outline-none focus:ring-0","bg-white dark:bg-primary-800","border border-primary-600 focus:border-primary-400 hover:border-primary-500","shadow-sm","transition duration-200 ease-in-out placeholder-primary-500",t.css)})})};var i=a(99488);let d=e=>{let{error:t}=e;return(0,r.jsx)("div",{className:"text-xs mt-1 text-red-500",children:t})}},99488:function(e,t,a){"use strict";a.d(t,{y:function(){return n}});var r=a(85893),s=a(14323);let n=e=>{let{children:t,required:a,css:n}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("text-base font-medium",n),children:[t,a&&(0,r.jsx)("span",{className:"pl-1 text-red-600",children:"*"})]})}},93446:function(e,t,a){"use strict";var r=a(85893),s=a(79544),n=a(72749);let l=e=>{let{title:t,description:a,input:l,charCount:i,preElement:d,required:o=!1,error:c}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(n.yH,{required:o,css:a?void 0:"pb-1",children:t}),a&&(0,r.jsx)(n.d2,{children:a}),(0,r.jsxs)("div",{className:"w-full flex justify-start gap-2",children:[d&&(0,r.jsx)("div",{children:d}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(n.kO,{input:{placeholder:l.placeholder,onChange:l.onChange,value:l.value,css:l.css}}),c&&(0,r.jsx)(n.pd,{error:c}),i&&l.value.length>0&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(s.Z,{str:l.value,minLimit:i.min,maxLimit:i.max,theme:"dark"})})]})]})]})};t.Z=l},37874:function(e,t,a){"use strict";var r=a(85893),s=a(41664),n=a.n(s);let l=e=>{let{isRequired:t,mobileMessage:a,desktopMessage:s}=e;return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsxs)("div",{className:"mb-4 w-full bg-red-100 dark:bg-red-300 border border-red-500/60 text-black p-4 rounded-lg flex justify-center items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),(0,r.jsxs)("span",{className:"md:hidden",children:[(0,r.jsx)(n(),{href:"/settings/account",children:(0,r.jsx)("span",{className:"text-chat-blue hover:font-semibold transition-all duration-200 ease-in-out",children:"Subscribe"})})," ",a]}),(0,r.jsxs)("span",{className:"hidden md:flex gap-2",children:[s,(0,r.jsx)(n(),{href:"/settings/account",children:(0,r.jsx)("span",{className:"text-chat-blue hover:font-semibold transition-all duration-200 ease-in-out",children:"Subscribe now."})})]})]})})};t.Z=l},11798:function(e,t,a){"use strict";var r=a(85893),s=a(14323);let n=e=>{let{children:t,className:a,...n}=e;return(0,r.jsx)("div",{...n,className:(0,s.cn)("p-4 md:p-8 rounded-lg shadow flex flex-col gap-4","ring-1 ","bg-white ring-border-light","dark:ring-border-dark dark:bg-primary-900",a),children:t})};t.Z=n},8275:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return f},DR:function(){return g},GG:function(){return j},Vq:function(){return d},cZ:function(){return x},hg:function(){return o}});var r=a(85893),s=a(67294),n=a(12854),l=a(14323),i=a(23735);let d=n.fC,o=n.xz,c=e=>{let{className:t,children:a,...s}=e;return(0,r.jsx)(n.h_,{className:(0,l.AK)(t||""),...s,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center sm:items-center",children:a})})};c.displayName=n.h_.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,l.AK)("fixed inset-0 z-50 bg-black/60 dark:bg-primary-700-fade/60 backdrop-blur-md transition-all duration-100","data-[state=open]:animate-overlayShow data-[state=closed]:animate-overlayHide",a||""),...s})});u.displayName=n.aV.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 p-8",children:(0,r.jsxs)(n.VY,{ref:t,className:(0,l.AK)("absolute z-50 flex flex-col w-full gap-4 p-2 md:p-6 shadow-lg animate-in","data-[state=open]:animate-contentShow data-[state=closed]:animate-contentHide","top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-md","border border-primary-700 bg-primary-900",a||""),...d,children:[s,(0,r.jsx)(n.x8,{className:(0,l.AK)("absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background","transition-opacity hover:opacity-100","disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"),children:(0,r.jsx)(i.bM,{size:"sm",className:"select-none focus:outline-none"})})]})})]})});x.displayName=n.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.AK)("flex flex-col space-y-1.5 text-center sm:text-left",t||""),...a})};m.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.AK)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t||""),...a})};h.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,l.AK)("text-lg font-semibold leading-none tracking-tight",a||""),...s})});p.displayName=n.Dx.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,l.AK)("text-sm text-muted-foreground",a||""),...s})});f.displayName=n.dk.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.AK)("text-sm text-muted-foreground",a||""),...s})});g.displayName="DialogDescriptionDiv";let j=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.x8,{style:{border:"none !important",outline:"none !important"},className:a,...s})});j.displayName=n.dk.displayName},73069:function(e,t,a){"use strict";a.d(t,{C9:function(){return o},ET:function(){return c},Zn:function(){return n},_W:function(){return r},a8:function(){return s},sE:function(){return i},wA:function(){return l},wh:function(){return d}});let r={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},s={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},l={hidden:{opacity:0,height:0},show:{opacity:1,height:"auto",transition:{staggerChildren:.4}}},i={hidden:{opacity:0},show:{opacity:1}},d={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},o={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},c={hidden:{opacity:0,y:-20},show:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}}},39638:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return K}});var r=a(85893),s=a(46018),n=a(95424),l=a(67091),i=a(3036),d=a(14323),o=a(24125),c=a(41664),u=a.n(c);let x=e=>{let{children:t,disabled:a,href:s,target:n="_self",className:l,isInline:i=!0}=e;return a&&i?(0,r.jsx)("span",{className:l,children:t}):a?(0,r.jsx)("div",{className:l,children:t}):(0,r.jsx)(u(),{href:s,target:n,className:l,children:t})};var m=a(67294);let h=e=>{let{bucket:t}=e,a=(0,m.useMemo)(()=>t.active,[t]);return(0,r.jsx)(x,{isInline:!1,disabled:!a,href:"/data/".concat(t.id),children:(0,r.jsx)("div",{className:(0,d.cn)("rounded-lg border border-[#E4E4E7] dark:border-primary-700 p-3","shadow-sm transition-all duration-200 ease-in-out","flex flex-col gap-1",a?(0,d.cn)("bg-white dark:bg-primary-900 hover:bg-primary-900 dark:hover:bg-primary-700","cursor-pointer"):(0,d.cn)("bg-gray-100 dark:bg-primary-800","cursor-not-allowed")),children:(0,r.jsx)(o.Z,{bucket:t})})})},p=e=>{let{buckets:t,isLoading:a}=e;return a||!t?(0,r.jsx)(r.Fragment,{children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:(0,d.cn)("rounded-lg","bg-gray-300 dark:bg-gray-800","flex flex-col gap-1","h-[70px] animate-pulse")},t))}):(0,r.jsx)("div",{className:"flex flex-col gap-2",children:t.length>0&&t.map(e=>(0,r.jsx)(h,{bucket:e},e.id))})};var f=a(95591),g=a(45830),j=a(814),v=a(11163),b=a(44781),y=a(37874);let w=e=>{let{userId:t}=e,[a,s]=(0,m.useState)(!1),{isSubscribed:n,loading:l}=(0,b.O)(),d=(0,v.useRouter)(),{data:o,error:c,isLoading:u,mutate:x}=(0,f.ZP)(n?g.x.url("listBuckets",{userId:t}):null,(0,j.SK)(j.uP,"buckets"));return(0,r.jsxs)("div",{className:"h-full w-full rounded-lg overflow-y-auto",children:[(0,r.jsx)(y.Z,{isRequired:!l&&!n,mobileMessage:"to use the Knowledge Hub.",desktopMessage:"Subscription required use the Knowledge Hub."}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"bg-orange-200 dark:bg-orange-600 rounded-lg p-4 flex flex-col gap-4 text-base",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-medium",children:"Add Custom Data"}),"The Knowledge Hub contains all your Knowledge Bases. A Knowledge Base is a place for you to connect or upload external data sources. You can connect the Knowledge Bases to your chatbots in order to train them on that information and provide more context aware responses."]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)(i.Z,{config:{variant:"create-bucket-and-upload-data"},openDialog:a,setOpenDialog:s,onSubmitEnd:(e,t)=>{e.bucketId&&d.push("data/".concat(e.bucketId),void 0,{shallow:!0}),null==t||t(),x()},userIsSubscribed:n,children:(0,r.jsxs)("div",{className:"bg-chat-blue rounded-lg p-2 text-white hover:shadow-md transition-all duration-200 ease-in-out flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10.5v6m3-3H9m4.06-7.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})}),"Create Knowledge Base"]})}),n&&t&&(0,r.jsx)(N,{userId:t})]}),n&&(0,r.jsx)(p,{buckets:o,isLoading:u})]})]})},N=e=>{let{userId:t}=e,{data:a,error:s,isLoading:n,mutate:l}=(0,f.ZP)(g.x.url("getStorageUsed",{userId:t}),(0,j.SK)(j.Yc,"storage used")),i=(0,m.useMemo)(()=>{if(!a)return;let e=(0,d.YK)(a);return e<100?(0,d.pw)((0,d.RW)(e,2)):100},[a]);return(0,r.jsx)(r.Fragment,{children:i&&(0,r.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[i,"MB / 100MB"]})})},k=()=>{let{userId:e}=(0,l.Z)();return(0,r.jsx)(n.Z,{header:{title:(0,r.jsxs)("span",{className:"flex items-center gap-4",children:["Knowledge Hub ",(0,r.jsx)(s.Z,{})]})},content:{limitWidth:!0,padding:!0,align:"center",css:"max-w-3xl"},children:e&&(0,r.jsx)(w,{userId:e})})};var K=k}},function(e){e.O(0,[8907,4885,6430,4084,378,2854,5591,5917,5424,8898,9774,2888,179],function(){return e(e.s=51350)}),_N_E=e.O()}]);